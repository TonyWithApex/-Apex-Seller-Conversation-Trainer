<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Apex Seller Conversation Trainer — Apex Method Edition</title>
<style>
  :root{
    --bg:#0f0f10;
    --panel:#171719;
    --card:#1f1f22;
    --ink:#f6f6f7;
    --muted:#a7abb4;
    --gold1:#b3903c;
    --gold2:#d9c27a;
    --danger:#f05454;
    --ok:#39d98a;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:radial-gradient(1400px 800px at 10% -10%,#1a1a1d 0%,#111113 45%,#0c0c0d 100%),#0b0b0c;color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
  .wrap{max-width:1200px;margin:auto;padding:24px}
  header{
    display:flex;align-items:center;gap:14px;padding:14px 16px;border:1px solid #26262b;
    background:linear-gradient(180deg,#19191c 0%, #141417 100%);border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,.35)
  }
  .brand{
    display:flex;align-items:center;gap:12px
  }
  .brand img{
    width:44px;height:44px;object-fit:contain;filter:drop-shadow(0 2px 6px rgba(0,0,0,.5))
  }
  .title{
    font-weight:800;letter-spacing:.2px;font-size:18px;line-height:1.1
  }
  .title span{
    background:linear-gradient(90deg,var(--gold1),var(--gold2));
    -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent
  }
  .gate-badge{
    margin-left:auto;font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid #2c2c31;color:var(--muted)
  }

  .grid{display:grid;grid-template-columns:280px 1fr;gap:16px;margin-top:16px}
  @media (max-width:900px){.grid{grid-template-columns:1fr}}

  .panel{background:linear-gradient(180deg,#161619,#131316);border:1px solid #26262b;border-radius:14px;padding:16px}
  .panel h3{margin:0 0 10px 0;font-size:13px;letter-spacing:.12em;color:var(--muted);text-transform:uppercase}

  .steps{display:flex;flex-direction:column;gap:8px}
  .step{
    padding:10px 12px;border:1px solid #25252a;border-radius:10px;background:#16161a;color:#d6d7db;font-size:14px;line-height:1.25
  }
  .step small{display:block;color:var(--muted);margin-top:4px;font-size:11px}
  .step.active{border-color:rgba(212,185,93,.35);background:linear-gradient(180deg,#19191d,#17171a)}
  .step.active .dot{background:linear-gradient(90deg,var(--gold1),var(--gold2))}
  .dot{width:8px;height:8px;border-radius:50%;background:#3a3a42;display:inline-block;margin-right:8px;vertical-align:middle}

  .card{background:linear-gradient(180deg,#19191d,#141417);border:1px solid #26262b;border-radius:14px;padding:16px}
  .stack{display:flex;flex-direction:column;gap:12px}

  .meter{height:10px;border-radius:999px;background:#222226;border:1px solid #2b2b31;overflow:hidden}
  .fill{height:100%;background:linear-gradient(90deg,#4ce3a4,#b2f7ce);width:0%}

  .tags{display:flex;flex-wrap:wrap;gap:8px}
  .tag{font-size:12px;border:1px solid #2b2b31;border-radius:999px;padding:6px 10px;color:var(--muted)}
  .tag.ok{border-color:#2f6e57;color:#b9f4d5}
  .tag.warn{border-color:#6e2f2f;color:#ffc7c7}

  #conversation{min-height:220px}
  .bubble{
    padding:14px 16px;border:1px solid #27272c;border-radius:12px;background:#151519
  }
  .bubble.me{background:linear-gradient(180deg,#1b1b20,#16161a)}
  .choice-row{display:grid;gap:10px;grid-template-columns:1fr}
  .choice{
    text-align:left;padding:12px 14px;border-radius:12px;border:1px solid #2a2a30;background:#16161b;color:#e6e7eb;cursor:pointer;font-weight:600
  }
  .choice:hover{border-color:#3a3a42}
  .choice.best{outline:1px solid rgba(212,185,93,.45)}
  .choice.bad{outline:1px solid rgba(240,84,84,.45)}

  .cta-row{display:flex;gap:10px;flex-wrap:wrap}
  .btn{border:1px solid #2b2b31;background:#17171b;color:#f5f6f7;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
  .btn.gold{background:linear-gradient(90deg,var(--gold1),var(--gold2));color:#111113;border:none}
  .btn:disabled{opacity:.5;cursor:not-allowed}

  .foot{
    display:flex;justify-content:space-between;align-items:center;margin-top:8px;color:var(--muted);font-size:12px
  }
  .foot b{color:#e7e7ea}

  /* Modal Gate */
  .modal{
    position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.75);z-index:50;padding:20px
  }
  .gate{
    max-width:520px;width:100%;background:linear-gradient(180deg,#17171b,#121216);border:1px solid #2a2a30;border-radius:16px;padding:22px;box-shadow:0 20px 60px rgba(0,0,0,.45)
  }
  .gate h2{margin:0 0 6px 0;font-size:22px}
  .sub{color:var(--muted);font-size:13px;margin-bottom:16px}
  .input{display:flex;gap:8px}
  input[type=password]{flex:1;background:#101013;color:#f7f7fa;border:1px solid #2a2a30;border-radius:10px;padding:12px 14px;font-size:14px;letter-spacing:.4px}
  .err{color:var(--danger);font-size:12px;margin-top:8px;min-height:16px}

  .score-grid{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
  .score-card{border:1px solid #2a2a30;background:#151519;border-radius:12px;padding:12px}
  .score-card h4{margin:0 0 6px;font-size:13px;color:var(--muted);letter-spacing:.08em;text-transform:uppercase}
  .number{font-size:22px;font-weight:800}
  .goldtext{background:linear-gradient(90deg,var(--gold1),var(--gold2));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <!-- Replace the src with your hosted Apex logo URL -->
      <img id="apexLogo" src="https://placehold.co/88x88/png?text=APEX" alt="Apex Logo" />
      <div class="title">
        <div><span>Apex</span> Seller Conversation Trainer</div>
        <small style="color:var(--muted)">Apex Method Edition</small>
      </div>
    </div>
    <div class="gate-badge">Exclusive access</div>
  </header>

  <div class="grid">
    <!-- LEFT: Steps / Trackers -->
    <aside class="panel">
      <h3>Flow — Apex Method</h3>
      <div id="steps" class="steps"></div>

      <div class="stack" style="margin-top:14px">
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
            <div style="font-size:12px;letter-spacing:.12em;color:var(--muted);text-transform:uppercase">Trust</div>
            <div id="trustLabel" style="font-weight:800">0/10</div>
          </div>
          <div class="meter"><div id="trustFill" class="fill"></div></div>
        </div>

        <div class="card">
          <div style="font-size:12px;letter-spacing:.12em;color:var(--muted);text-transform:uppercase;margin-bottom:8px">MCTP</div>
          <div id="mctpTags" class="tags"></div>
        </div>
      </div>
    </aside>

    <!-- RIGHT: Conversation -->
    <main class="panel">
      <div class="stack">
        <div id="conversation" class="stack"></div>

        <div id="choices" class="choice-row"></div>

        <div class="cta-row">
          <button id="nextBtn" class="btn gold" disabled>Next Step</button>
          <button id="restartBtn" class="btn" onclick="location.reload()">Restart</button>
        </div>

        <div class="foot">
          <div>Step <b id="stepX">1</b>/10 • Following the <b>Apex Method</b></div>
          <div>Goal: Build trust, complete <b>MCTP</b>, and align with flow.</div>
        </div>

        <div id="scoreBlock" class="card" style="display:none">
          <h3 style="margin:0 0 8px 0">Results</h3>
          <div class="score-grid">
            <div class="score-card"><h4>Apex Flow</h4><div class="number" id="flowScore">0 / 50</div></div>
            <div class="score-card"><h4>Trust & Tone</h4><div class="number" id="trustScore">0 / 30</div></div>
            <div class="score-card"><h4>MCTP</h4><div class="number" id="mctpScore">0 / 20</div></div>
            <div class="score-card"><h4>Total</h4><div class="number goldtext" id="totalScore">0 / 100</div></div>
          </div>
          <div style="margin-top:10px;color:var(--muted)" id="coachNote"></div>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- PASSWORD MODAL -->
<div id="gateModal" class="modal" role="dialog" aria-modal="true">
  <div class="gate">
    <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px">
      <!-- Optional header logo again -->
      <img src="https://placehold.co/64x64/png?text=APEX" alt="Apex" style="width:32px;height:32px;border-radius:6px;object-fit:contain" />
      <h2 style="margin:0"><span style="background:linear-gradient(90deg,var(--gold1),var(--gold2));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent">Apex</span> Access</h2>
    </div>
    <div class="sub">Enter passcode to launch trainer.</div>
    <div class="input">
      <input id="gateInput" type="password" placeholder="Password" autocomplete="current-password" />
      <button id="gateBtn" class="btn gold">Unlock</button>
    </div>
    <div id="gateErr" class="err"></div>
    <div class="sub" style="margin-top:10px">Title: <b>Apex Seller Conversation Trainer — Apex Method Edition</b></div>
  </div>
</div>

<script>
/* ========= APEX SELLER CONVERSATION TRAINER — SINGLE FILE =========
   Branding:
   - To use your own logo, replace the <img id="apexLogo"> src with your hosted image.
   Access:
   - Passcode is set to: SellerConvo2025
=================================================================== */

const PASS = "SellerConvo2025";

// ----- Apex Method 10-step flow (with guaranteed MCTP between steps 6–9) -----
const FLOW = [
  { key:"philosophy",   title:"Guiding Philosophy",         tip:"Create safety & lead with conviction.", best:0,
    choices:[
      {t:"“You’re in control the whole way — my job is to help you decide safely.”", trust:+2, flow:+1 },
      {t:"“I buy houses fast. Let’s move.”", trust:-1, flow:0, bad:true },
      {t:"“We’ll keep this simple and honest — fair?”", trust:+1, flow:+1 }
    ]},
  { key:"safety",       title:"Safety-First Rapport",       tip:"Give explicit permission to say no.", best:0,
    choices:[
      {t:"“If I’m not the right fit, totally okay to say no — deal?”", trust:+2, flow:+1 },
      {t:"“Let’s jump straight to price.”", trust:-1, flow:0, bad:true },
      {t:"“Quick chat — we’ll be upfront both ways. Sound good?”", trust:+1, flow:+1 }
    ]},
  { key:"expect",       title:"Expectation Setting",        tip:"Anchor convenience vs price tradeoff.", best:1,
    choices:[
      {t:"“Cash offers are lower than retail because you skip repairs, fees, and delays.”", trust:+1, flow:+2 },
      {t:"“I’ll beat any agent price.”", trust:-2, flow:0, bad:true },
      {t:"“Fast and clean — that’s the trade for convenience.”", trust:+0, flow:+1 }
    ]},
  { key:"objections",   title:"Objection Handling",         tip:"Acknowledge → Normalize → Elevate → No-pressure → Choice.", best:0,
    choices:[
      {t:"“Great question — most folks feel that way. You can always pass. Want to see both paths?”", trust:+2, flow:+2 },
      {t:"“That’s just how it is.”", trust:-2, flow:0, bad:true },
      {t:"“Happy to explain numbers and timing, no pressure.”", trust:+1, flow:+1 }
    ]},
  { key:"whyus",        title:"Why Sellers Choose Us",      tip:"Motivate without labels; focus on outcomes.", best:0,
    choices:[
      {t:"“No repairs, no showings, clear timeline. Does any of that fit your situation?”", trust:+1, flow:+2 },
      {t:"“Because wholesaling is better.”", trust:-2, flow:0, bad:true },
      {t:"“If speed or certainty help you, we’re useful.”", trust:+1, flow:+1 }
    ]},
  // M starts
  { key:"M",            title:"Discovery — Motivation (M)", tip:"Find the reason for selling.", best:0, mctp:"M",
    choices:[
      {t:"“What’s prompting the move now, and how would the right outcome help?”", trust:+1, flow:+2, reveal:"M" },
      {t:"“Bottom line first.”", trust:-1, flow:0, bad:true },
      {t:"“If nothing changes soon, what does that affect for you?”", trust:+1, flow:+1, reveal:"M" }
    ]},
  { key:"C",            title:"Discovery — Condition (C)",  tip:"Understand repairs & systems.", best:0, mctp:"C",
    choices:[
      {t:"“Any big items (roof, HVAC, plumbing, foundation) I should plan for?”", trust:+1, flow:+2, reveal:"C" },
      {t:"“Tell me everything wrong with it.”", trust:-1, flow:0, bad:true },
      {t:"“What updates would a buyer likely handle?”", trust:+1, flow:+1, reveal:"C" }
    ]},
  { key:"T",            title:"Discovery — Timeline (T)",   tip:"Agree on pace that serves them.", best:0, mctp:"T",
    choices:[
      {t:"“Ideal closing window if we’re a fit?”", trust:+1, flow:+2, reveal:"T" },
      {t:"“We close in 7 days. Works?”", trust:-1, flow:0, bad:true },
      {t:"“Any deadlines you’re solving for?”", trust:+1, flow:+1, reveal:"T" }
    ]},
  { key:"P",            title:"Discovery — Price (P)",      tip:"Elicit range; keep safety framing.", best:2, mctp:"P",
    choices:[
      {t:"“Based on condition & speed, where did you hope to land?”", trust:+1, flow:+1, reveal:"P" },
      {t:"“Give me your rock-bottom now.”", trust:-2, flow:0, bad:true },
      {t:"“Sellers in similar spots were around $X–$Y after costs — where do you see this?”", trust:+1, flow:+2, reveal:"P" }
    ]},
  // Close
  { key:"close",        title:"Close — Micro-Commitments",  tip:"Offer clarity, stories, and choice.", best:0,
    choices:[
      {t:"“Want a written breakdown & an offer to review—no pressure?”", trust:+2, flow:+2 },
      {t:"“Sign now.”", trust:-2, flow:0, bad:true },
      {t:"“Would seeing a quick example help you feel certain?”", trust:+1, flow:+1 }
    ]}
];

// ----- State -----
const state = {
  step: 0, // 0..9
  trust: 0, // 0..10
  flowPts: 0, // /50
  mctp:{M:false,C:false,T:false,P:false},
  answered:false,
  transcript:[]
};

// ----- UI Elements -----
const stepsEl = document.getElementById('steps');
const convEl  = document.getElementById('conversation');
const choicesEl = document.getElementById('choices');
const nextBtn = document.getElementById('nextBtn');
const stepX = document.getElementById('stepX');
const trustFill = document.getElementById('trustFill');
const trustLabel = document.getElementById('trustLabel');
const mctpTags = document.getElementById('mctpTags');
const scoreBlock = document.getElementById('scoreBlock');
const flowScore = document.getElementById('flowScore');
const trustScore = document.getElementById('trustScore');
const mctpScore = document.getElementById('mctpScore');
const totalScore = document.getElementById('totalScore');
const coachNote = document.getElementById('coachNote');

// ----- Renderers -----
function renderSteps(){
  stepsEl.innerHTML = FLOW.map((s, i)=>`
    <div class="step ${i===state.step?'active':''}">
      <div><span class="dot"></span><b>${i+1}. ${s.title}</b></div>
      <small>${s.tip}</small>
    </div>
  `).join('');
}

function renderMCTP(){
  const items = [
    {k:'M', label:'Motivation'},
    {k:'C', label:'Condition'},
    {k:'T', label:'Timeline'},
    {k:'P', label:'Price'}
  ];
  mctpTags.innerHTML = items.map(it=>{
    const has = !!state.mctp[it.k];
    return `<div class="tag ${has?'ok':'warn'}">${it.k} — ${it.label} ${has?'✓':''}</div>`;
  }).join('');
}

function setTrust(delta){
  state.trust = Math.max(0, Math.min(10, state.trust + delta));
  trustFill.style.width = (state.trust*10) + '%';
  trustLabel.textContent = `${state.trust}/10`;
}

function speak(txt, mine=false){
  const node = document.createElement('div');
  node.className = 'bubble'+(mine?' me':'');
  node.textContent = txt;
  convEl.appendChild(node);
  convEl.scrollTop = convEl.scrollHeight;
}

function renderStep(){
  renderSteps();
  renderMCTP();
  stepX.textContent = state.step+1;

  const s = FLOW[state.step];
  choicesEl.innerHTML = s.choices.map((c, idx)=>{
    const cls = [
      'choice',
      s.best===idx?'best':'',
      c.bad?'bad':''
    ].join(' ').trim();
    return `<button class="${cls}" data-idx="${idx}">${c.t}</button>`;
  }).join('');

  // system prompt line for the step
  convEl.innerHTML = '';
  speak(`Step ${state.step+1} — ${s.title}`);
  speak(s.tip);
  state.answered = false;
  nextBtn.disabled = true;

  // bind choices
  [...choicesEl.querySelectorAll('.choice')].forEach(btn=>{
    btn.addEventListener('click', onChoice);
  });
}

function onChoice(e){
  if(state.answered) return;
  state.answered = true;
  const s = FLOW[state.step];
  const idx = +e.currentTarget.dataset.idx;
  const pick = s.choices[idx];

  // score & effects
  setTrust(pick.trust||0);
  state.flowPts += (pick.flow||0)*5; // each flow point worth 5 (max ~50)
  if(s.mctp && pick.reveal) {
    state.mctp[s.mctp] = true;
  }

  // transcript
  state.transcript.push({step:state.step+1, title:s.title, said:pick.t});

  // show spoken line & a lightweight seller response
  speak(pick.t, true);
  let reply = "Okay, that helps.";
  if(pick.trust>=2) reply = "Thanks — that actually makes me feel comfortable.";
  if(pick.trust<=-1) reply = "Hmm… not sure about that.";
  if(s.mctp && pick.reveal){
    reply += ` (You uncovered ${s.mctp}.)`;
  }
  speak(reply);

  // enable next
  nextBtn.disabled = false;
}

function finish(){
  // scoring buckets
  const flow = Math.min(50, Math.max(0, Math.round(state.flowPts)));
  const trust = Math.round((state.trust/10)*30); // up to 30
  const mCount = Object.values(state.mctp).filter(Boolean).length;
  const mctps = Math.round((mCount/4)*20); // up to 20
  const total = flow + trust + mctps;

  flowScore.textContent = `${flow} / 50`;
  trustScore.textContent = `${trust} / 30`;
  mctpScore.textContent = `${mctps} / 20`;
  totalScore.textContent = `${total} / 100`;

  let note = [];
  if(mCount<4) note.push(`Complete all MCTP signals next time (${mCount}/4).`);
  if(state.trust<7) note.push(`Raise trust with more safety language (you ended at ${state.trust}/10).`);
  if(flow<40) note.push(`Stick tighter to the Apex flow — your flow score was ${flow}/50.`);
  if(note.length===0) note.push(`Excellent alignment with the Apex Method. Strong, safe leadership.`);

  coachNote.textContent = note.join(' ');

  scoreBlock.style.display = 'block';
  choicesEl.innerHTML = '';
  speak("Good work. Results posted below.");
}

// ----- Controls -----
nextBtn.addEventListener('click', ()=>{
  if(state.step < FLOW.length-1){
    state.step++;
    renderStep();
    if(state.step===FLOW.length-1){
      nextBtn.textContent = "Finish";
    }
  } else {
    // Finish
    finish();
    nextBtn.disabled = true;
  }
});

// ----- Init -----
function init(){
  // Build left step list initially
  renderSteps();
  // Initialize bars/tags
  setTrust(0);
  renderMCTP();
  // First step
  renderStep();
}

// ----- Access Gate -----
const gateModal = document.getElementById('gateModal');
const gateBtn = document.getElementById('gateBtn');
const gateInput = document.getElementById('gateInput');
const gateErr = document.getElementById('gateErr');

function unlock(){
  const v = (gateInput.value || "").trim();
  if(v===PASS){
    sessionStorage.setItem('apex_trainer_ok','1');
    gateModal.style.display = 'none';
    init();
  } else {
    gateErr.textContent = "Incorrect password. Hint: SellerConvo2025";
  }
}
gateBtn.addEventListener('click', unlock);
gateInput.addEventListener('keydown', e=>{ if(e.key==='Enter') unlock(); });

if(sessionStorage.getItem('apex_trainer_ok')==='1'){
  gateModal.style.display = 'none';
  init();
}
</script>
</body>
</html>
